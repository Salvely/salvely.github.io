---
date: 2025-06-17T14:49:02+08:00
lastmod: 2025-06-28T14:16:17+08:00
draft: true
---

我们前面添加了用户`gwen`，并且用`vim`打开文本编辑器，将默认用户设置成了`gwen`而不是`root`。结果我们想要通过`pacman -S git`安装`Git`的时候，出现了以下问题：

```bash
[gwen@DESKTOP-ROOSFVQ ~]$ pacman -S git
error: you cannot perform this operation unless you are root.
```

也就是说，只有`root`用户才有权限进行软件的安装，我们发现也只有`root`用户才有权限修改根目录下的文件。

那我们想要切回`root`，先输入`su`试试看：

```bash
[gwen@DESKTOP-ROOSFVQ ~]$ su
Password:
su: Authentication failure
```

`root`按理来说是没有密码的，为什么出现`Authentication failure`？

现在看来这涉及到几个问题：

1. 为什么`gwen`用户没有`pacman`、`su`、`sudo`等的权限，那普通用户到底有什么权限？`root`又有哪些权限？
2. 为什么明明`root`没有密码，在输入密码的时候直接回车，却会显示authentication failure？输入`gwen`的密码也不行，到底什么才是`root`的密码？
3. 这个问题怎么解决？
4. `su`和`sudo`命令的区别在哪里？为什么`su`可以直接运行，而`sudo`需要使用`pacman`安装？

## 文件权限与属性

在学习[用户和用户组 - Arch Linux 中文维基](https://wiki.archlinuxcn.org/zh-sg/%E7%94%A8%E6%88%B7%E5%92%8C%E7%94%A8%E6%88%B7%E7%BB%84)之前，我们来学习一下[文件权限与属性 - Arch Linux 中文维基](https://wiki.archlinuxcn.org/zh-sg/%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90%E4%B8%8E%E5%B1%9E%E6%80%A7#)文档，文档第一句交代了：

> [文件系统](https://wiki.archlinuxcn.org/wiki/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F "文件系统")用[权限](https://en.wikipedia.org/wiki/File_system_permissions "w:File system permissions")和[属性](https://en.wikipedia.org/wiki/File_attribute "w:File attribute")来规范系统进程与文件和目录之间的交互。

首先使用`ls -l`查看文件模式：

```bash
[root@DESKTOP-ROOSFVQ ~]# ls -l
total 0
```

欸？为什么这里是`total 0`？我们看一下当前目录是什么？

```bash
[root@DESKTOP-ROOSFVQ ~]# pwd
/root
```

我们先学习文件权限与属性，至于这里为什么，我们留到下一章再来解释。

## 用户和用户组

要解决第一个问题，我们要明确普通用户和`root`的权限的不同。通过搜索[用户和用户组 - Arch Linux 中文维基](https://wiki.archlinuxcn.org/zh-sg/%E7%94%A8%E6%88%B7%E5%92%8C%E7%94%A8%E6%88%B7%E7%BB%84)我们可以了解到，GNU/Linux通过用户和用户组实现访问控制，包括对文件访问和设备使用的控制。

通过读文档我们可以了解到，为了实行访问控制，一般来说分为了普通用户和特权用户。普通用户有不同的用户名，也可能从属于某个用户组，以享有整个用户组的特权。总的来说，它们对计算机的使用是有限制的。而超级用户`root`有计算机至高无上的权限，一般用作管理。普通用户可以通过`su`和`sudo`来临时获得特权。

而UNIX把其上的一切资源都抽象为了文件（参考[In UNIX Everything is a File - PH7Spot](https://web.archive.org/web/20190816135930/http://ph7spot.com/musings/in-unix-everything-is-a-file)），所有文件都通过一致的 API 以提供访问，因此光只用同一套简单的命令，就可以读写磁盘、键盘、文档以及网络设备。因此，对设备和其他各种资源的操作，就可全部统一为对文件的操作。利用对文件的操作，我们可以读取、修改和执行普通文件（如普通的`.cpp`程序），也可以对设备文件进行上述操作（如`/dev/audio`）。

## `su`和`sudo`

## `root`的密码到底是什么？

## 问题解决方法

## 关机问题
